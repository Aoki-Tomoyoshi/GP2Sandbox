# GitHub担当者の開発の流れ

## 最初の準備

最初に以下の準備をします。

1. チーム開発用のUnityプロジェクトを作成
1. 自分のGitHubアカウントに **private** で[プロジェクトをPublish](https://github.com/datgm21/gp1/blob/main/github-unityi.md#unity%E3%81%AE%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%82%92git%E3%81%A7%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%A6github%E3%81%ABpublish%E3%81%99%E3%82%8B%E6%89%8B%E9%A0%86)
1. [開発メンバーをリポジトリーに加える](https://github.com/datgm21/gp1/blob/main/github-unityi.md#%E5%85%B1%E6%9C%89%E8%A8%AD%E5%AE%9A)
1. [開発用のブランチを作成](./github_practice.md%ブランチを作る)

## 開発の仕方
基本的には[チーム開発の準備](./github_practice.md)で練習した通り、`dev`ブランチで開発をしてコミットとプッシュして、一段落したら`main`にマージして進めます。

## 他のメンバーの変更を取り込む
他のプログラマーやグラフィッカーが作成したパッケージや画像が共有用フォルダーに提出されたら、GitHub担当者がUnityプロジェクトに組み込みます。

### Unityパッケージの読み込み

他のプログラマーがエクスポートしたUnityパッケージをインポートする時はコンフリクトが発生する可能性があります。そのため、mainやdevブランチに直にインポートはせず、マージ専用のブランチで作業するのが安全です。以下、手順です。

1. GitHub Desktopで変更されたファイルがあったらコミット(エラーがあったり作業途中でもコミットして構いません)
1. devブランチになっていなかったら切り替え
1. devブランチを元に、新しいブランチ`merge`を作成
1. Unityに切り替え
1. ネットドライブに提出されたUnityパッケージファイルを、UnityのProjectウィンドウにドラッグ&ドロップ
1. 更新ファイルリストの一覧を確認して、変更する必要がないものが含まれていたら、チェックを外してからインポート
1. Playして動作を確認
1. 動作に問題がなければ保存
1. GitHub Desktopに切り替えてコミット
1. devブランチに切り替えてから、mergeブランチをマージ
1. コンフリクトが発生しなければ、mergeブランチに切り替えて、BranchメニューからDeleteでmergeブランチを削除

以上です。コンフリクトが発生した場合は対応が必要になります。[GitHub練習](./github_practice.md)に紹介されているAtomで解決する方法を試して、無理そうなときは以下の対応をします。

### コンフリクトの箇所が多くて対応が難しい場合の解決策

- Unityパッケージを作成したメンバーとコンフリクトの箇所を確認して、コンフリクトが起きないようにUnityパッケージを作り直してもらう
- 作り直しが難しい場合や、手作業で修正できそうな場合は、作成したメンバーと相談しながら、GitHub担当者のところで作業して作業を反映させる

修正が難しいコンフリクトは、作業ルールを守らずに他のメンバーが担当しているシーンやPrefabを変更した際に発生します。シーンやプレハブを別の名前にしてからエクスポートし直して、GitHub担当者のリポジトリーへインポートした後に、手作業で組み込む必要が出てくる場合があります。

シーンやプレハブは、複数のメンバーで編集しなくて済むように分けて作るよう心がけましょう。


### グラフィックやオーディオ、フォントなどのリソースの組み込み

1. GitHub Desktopで`dev`ブランチにする
1. Unityでプロジェクトを開いて、Projectウィンドウからコピー先のフォルダーを右クリックして、Show in explorer でフォルダーを開く
1. ネットドライブの提出フォルダーから、更新されたファイルやフォルダーを上書きコピーする
1. 問題なければ、GitHub Desktopでコミットとプッシュする

#### 注意!!
UnityのProjectウィンドウにドラッグ&ドロップすると、同じファイルでも別のファイルとして読み込まれてしまいます。Explorerでコピーすれば以前の設定をそのままでファイルを差し替えることができます。


---

- [GitHub練習](./github_practice.md)へ
- [通常メンバーの作業](./general_dev.md)へ
- [README.md](../README.md)へ
